import{r as e,_ as s,j as a,a as t,b as i,c as r,T as n,P as d}from"./index-BzZ8wQxk.js";import{I as l,L as c}from"./Link-CPgyOf9u.js";import{T as o,u,S as f,P as m,L as h,c as j,B as b,D as x,E as g,d as p,F as _}from"./star_fill_40-B-Z-C4O1.js";import{F as y,B as N}from"./FormInput-C7af9fMy.js";import{I as v}from"./IconContainer-DppEtn2M.js";const C={bezeled:"tgui-93cba8aff2e72079",plain:"tgui-08ef1486bc111162",gray:"tgui-2250ff52f0b5cf71",outline:"tgui-53781f3cf83e8be1"},I={s:"tgui-b92d762e02762017",m:"tgui-024dfe77a8f2cfb0",l:"tgui-8ca1879e1128c105"},q=e.forwardRef((e,n)=>{var{size:d="m",mode:l="bezeled",className:c,children:u}=e,f=s(e,["size","mode","className","children"]);return a.jsx(o,t(i({ref:n,Component:"button",className:r("tgui-dda0e80fdf796ba5",C[l],I[d],c)},f),{children:u}))}),T=e.forwardRef((e,t)=>{var{type:d="text",header:l,before:c,after:o,status:m,className:h,disabled:j}=e,b=s(e,["type","header","before","after","status","className","disabled"]);const x=u(),g="ios"===x?n:f;return a.jsx(y,{header:l,before:c,after:o,status:m,disabled:j,className:r("tgui-d9de1f32aee12a15","ios"===x&&"tgui-9b2ad13855aef059",h),children:a.jsx(g,i({ref:t,Component:"input",className:"tgui-c4863cd4c893a047",type:d,disabled:j},b))})}),k=(s,a)=>{const[t,i]=e.useState(s);return e.useEffect(()=>{const e=window.setTimeout(()=>{i(s)},a);return()=>window.clearTimeout(e)},[a,s]),t},w="_page_y2qdd_1",z="_search_y2qdd_5",B="_bottomBar_y2qdd_9",L="_checkInactive_y2qdd_19",E="_checkActive_y2qdd_24",M="_checkButton_y2qdd_28",P="_selectableCell_y2qdd_44",F="_loadMore_y2qdd_48",R=({title:s,description:t,addLabel:i,items:r,addPath:o,emptyTitle:u,emptyDescription:f,query:y,onQueryChange:C,isLoading:I=!1,hasMore:k=!1,onLoadMore:R,onItemClick:D,selection:S})=>{const A=e.useRef(null),O=a.jsx(N,{size:"l",stretched:!0,before:a.jsx(_,{size:20}),children:i}),Q=Boolean(S),G=S?.selectedIds??[],H=Q&&G.length>0&&S?.actions,J=y?"Ничего не найдено":u,K=y?"Попробуйте изменить запрос.":f;return e.useEffect(()=>{if(!R||!k||I)return;const e=A.current;if(!e)return;const s=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)&&R()},{rootMargin:"200px"});return s.observe(e),()=>{s.disconnect()}},[k,I,R]),a.jsxs(m,{children:[a.jsx("div",{className:w,children:a.jsx(h,{children:a.jsxs(j,{header:s,footer:t,children:[a.jsx("div",{className:z,children:a.jsx(T,{placeholder:"Поиск",before:a.jsx(x,{size:20}),value:y,onChange:e=>C(e.currentTarget.value),after:y?a.jsx(q,{size:"s",mode:"plain",onClick:()=>C(""),"aria-label":"Очистить поиск",children:a.jsx(b,{})}):null})}),0===r.length&&I?a.jsx(d,{header:"Загрузка...",description:a.jsx(n,{children:"Подождите немного."})}):0===r.length?a.jsx(d,{header:J,description:a.jsx(n,{children:K})}):r.map(e=>{const s=G.includes(e.id),t=Boolean(D),i=Q?t?a.jsx("button",{type:"button",className:M,onClick:s=>{s.stopPropagation(),S?.onToggle(e.id)},"aria-label":s?"Снять выбор":"Выбрать",children:a.jsx(v,{className:s?E:L,children:a.jsx(g,{})})}):a.jsx(v,{className:s?E:L,children:a.jsx(g,{})}):e.status??a.jsx(l,{});return a.jsx(p,{subtitle:e.subtitle,after:i,onClick:t?()=>D?.(e):Q?()=>S?.onToggle(e.id):void 0,className:P,multiline:!0,children:e.title},e.id)}),R?a.jsx("div",{ref:A,className:F,children:I&&r.length>0?a.jsx(n,{children:"Загрузка..."}):null}):null]})})}),a.jsx("div",{className:B,children:H?S?.actions:o?a.jsx(c,{to:o,viewTransition:!0,children:O}):O})]})};export{R as E,T as I,k as u};
