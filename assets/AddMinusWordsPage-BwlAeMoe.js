import{d as t,u as e,r as i,j as s}from"./index-D_ikmKLJ.js";import{s as a,A as n}from"./text-D0o3SbMy.js";import{G as o,l}from"./star_fill_40-CCkXl2eC.js";import"./FormInput-RuGKqIE6.js";const r=()=>{const r=t(),m=e(),[d,u]=i.useState(""),[p,c]=i.useState(!1),h=i.useMemo(()=>a(d).map((t,e)=>({id:`${e}-${t}`,title:t})),[d]);return s.jsx(n,{title:"Добавить минус-слова",description:"Каждое слово или фраза — с новой строки.",placeholder:"бесплатно\nвакансия",addLabel:"Добавить минус-слова",listTitle:"Будут добавлены",listFooter:"Список формируется из строк, введённых в поле выше.",items:h,emptyTitle:"Пока нечего добавлять",emptyDescription:"Введите слова в поле выше, чтобы увидеть список.",value:d,onChange:u,onSubmit:async()=>{if(!p&&0!==h.length){c(!0);try{const t={items:h.map(t=>t.title)},e=await o(t),i=[];e.duplicates.length>0&&i.push(`Уже есть:\n${e.duplicates.join("\n")}`),e.invalid.length>0&&i.push(`Некорректные строки:\n${e.invalid.join("\n")}`),i.length>0&&alert(i.join("\n\n")),m.invalidateQueries({queryKey:l.minusWordsRoot}),m.invalidateQueries({queryKey:l.me}),window.history.length>1?r(-1):r("/minus-words",{replace:!0,state:{navDirection:"back"}})}catch(t){console.error("Failed to add minus words",t),alert("Не удалось добавить минус-слова. Попробуйте еще раз.")}finally{c(!1)}}},submitDisabled:0===h.length,isSubmitting:p})};export{r as AddMinusWordsPage};
