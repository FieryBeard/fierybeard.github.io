import{d as t,u as e,r as i,j as s}from"./index-DxtWIYpD.js";import{s as n,A as a}from"./text-DQKzE299.js";import{G as l,l as o}from"./star_fill_40-OewN37kb.js";import"./FormInput-DEeNPYk6.js";const r=()=>{const r=t(),m=e(),[d,u]=i.useState(""),[p,c]=i.useState(!1),h=i.useMemo(()=>n(d).map((t,e)=>({id:`${e}-${t}`,title:t})),[d]);return s.jsx(a,{title:"Добавить минус-слова",description:"Каждое слово или фраза — с новой строки.",placeholder:"бесплатно\nвакансия",addLabel:"Добавить минус-слова",listTitle:"Будут добавлены",listFooter:"Список формируется из строк, введённых в поле выше.",items:h,emptyTitle:"Пока нечего добавлять",emptyDescription:"Введите слова в поле выше, чтобы увидеть список.",value:d,onChange:u,onSubmit:async()=>{if(!p&&0!==h.length){c(!0);try{const t={items:h.map(t=>t.title)},e=await l(t),i=[];e.duplicates.length>0&&i.push(`Уже есть:\n${e.duplicates.join("\n")}`),e.invalid.length>0&&i.push(`Некорректные строки:\n${e.invalid.join("\n")}`),i.length>0&&alert(i.join("\n\n")),m.invalidateQueries({queryKey:o.minusWordsRoot}),m.invalidateQueries({queryKey:o.me}),window.history.length>1?r(-1):r("/minus-words",{replace:!0})}catch(t){console.error("Failed to add minus words",t),alert("Не удалось добавить минус-слова. Попробуйте еще раз.")}finally{c(!1)}}},submitDisabled:0===h.length,isSubmitting:p})};export{r as AddMinusWordsPage};
