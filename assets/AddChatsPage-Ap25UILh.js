import{d as t,u as e,r as i,j as a}from"./index-DxtWIYpD.js";import{s,A as n}from"./text-DQKzE299.js";import{n as l,l as r}from"./star_fill_40-OewN37kb.js";import"./FormInput-DEeNPYk6.js";const o=()=>{const o=t(),m=e(),[c,d]=i.useState(""),[h,p]=i.useState(!1),u=i.useMemo(()=>s(c).map((t,e)=>({id:`${e}-${t}`,title:t})),[c]);return a.jsx(n,{title:"Добавить чаты",description:"Каждый чат с новой строки. Можно указывать @username или ссылку.",placeholder:"chat2\n@chat1\nhttps://t.me/chat\nhttps://t.me/+kDx50OVEMm05MiUy",addLabel:"Добавить чаты",listTitle:"Будут добавлены",listFooter:"Список формируется из строк, введённых в поле выше.",items:u,emptyTitle:"Пока нечего добавлять",emptyDescription:"Введите чаты в поле выше, чтобы увидеть список.",value:c,onChange:d,onSubmit:async()=>{if(!h&&0!==u.length){p(!0);try{const t={items:u.map(t=>t.title)},e=await l(t);e.invalid.length>0&&alert(`Некорректные строки:\n${e.invalid.join("\n")}`),m.invalidateQueries({queryKey:r.chatsRoot}),m.invalidateQueries({queryKey:r.me}),window.history.length>1?o(-1):o("/chats",{replace:!0})}catch(t){console.error("Failed to add chats",t),alert("Не удалось добавить чаты. Попробуйте еще раз.")}finally{p(!1)}}},submitDisabled:0===u.length,isSubmitting:h})};export{o as AddChatsPage};
