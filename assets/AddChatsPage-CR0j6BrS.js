import{d as t,u as e,r as a,j as i}from"./index-D_ikmKLJ.js";import{s,A as n}from"./text-D0o3SbMy.js";import{n as r,l}from"./star_fill_40-CCkXl2eC.js";import"./FormInput-RuGKqIE6.js";const o=()=>{const o=t(),m=e(),[c,d]=a.useState(""),[h,p]=a.useState(!1),u=a.useMemo(()=>s(c).map((t,e)=>({id:`${e}-${t}`,title:t})),[c]);return i.jsx(n,{title:"Добавить чаты",description:"Каждый чат с новой строки. Можно указывать @username или ссылку.",placeholder:"chat2\n@chat1\nhttps://t.me/chat\nhttps://t.me/+kDx50OVEMm05MiUy",addLabel:"Добавить чаты",listTitle:"Будут добавлены",listFooter:"Список формируется из строк, введённых в поле выше.",items:u,emptyTitle:"Пока нечего добавлять",emptyDescription:"Введите чаты в поле выше, чтобы увидеть список.",value:c,onChange:d,onSubmit:async()=>{if(!h&&0!==u.length){p(!0);try{const t={items:u.map(t=>t.title)},e=await r(t);e.invalid.length>0&&alert(`Некорректные строки:\n${e.invalid.join("\n")}`),m.invalidateQueries({queryKey:l.chatsRoot}),m.invalidateQueries({queryKey:l.me}),window.history.length>1?o(-1):o("/chats",{replace:!0,state:{navDirection:"back"}})}catch(t){console.error("Failed to add chats",t),alert("Не удалось добавить чаты. Попробуйте еще раз.")}finally{p(!1)}}},submitDisabled:0===u.length,isSubmitting:h})};export{o as AddChatsPage};
