import{d as e,u as t,r as i,j as s}from"./index-B-UK4bm4.js";import{s as a,A as n}from"./text-B7BoYng4.js";import{s as l,l as o}from"./star_fill_40-DYdcEbYe.js";import"./FormInput-DPqEQViA.js";const r=()=>{const r=e(),d=t(),[m,p]=i.useState(""),[u,c]=i.useState(!1),y=i.useMemo(()=>a(m).map((e,t)=>({id:`${t}-${e}`,title:e})),[m]);return s.jsx(n,{title:"Добавить ключевые слова",description:"Каждое слово или фраза — с новой строки.",placeholder:"купить квартиру\nаренда офиса\nхолодильник",addLabel:"Добавить слова",listTitle:"Будут добавлены",listFooter:"Список формируется из строк, введённых в поле выше.",items:y,emptyTitle:"Пока нечего добавлять",emptyDescription:"Введите слова в поле выше, чтобы увидеть список.",value:m,onChange:p,onSubmit:async()=>{if(!u&&0!==y.length){c(!0);try{const e={items:y.map(e=>e.title)},t=await l(e),i=[];t.duplicates.length>0&&i.push(`Уже есть:\n${t.duplicates.join("\n")}`),t.invalid.length>0&&i.push(`Некорректные строки:\n${t.invalid.join("\n")}`),i.length>0&&alert(i.join("\n\n")),d.invalidateQueries({queryKey:o.keywordsRoot}),d.invalidateQueries({queryKey:o.me}),window.history.length>1?r(-1):r("/keywords",{replace:!0})}catch(e){console.error("Failed to add keywords",e),alert("Не удалось добавить слова. Попробуйте еще раз.")}finally{c(!1)}}},submitDisabled:0===y.length,isSubmitting:u})};export{r as AddKeywordsPage};
